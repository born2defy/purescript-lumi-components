(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{KjUc:function(e,t,a){"use strict";var n,r,i,u,l=a("UCB5"),o=a("Z7LG"),d=a("ZYq+"),s=a("H8k5"),c=a("t5nC"),f=a("Hnrf"),p=a("qrEn"),m=a("YrJM"),v=a("sAO9"),y=a("3O1O"),h=a("rkps"),b=a("T4xb"),w=a("KGqT"),g=a("AKjc"),U=a("jcJx"),A=a("bJSe"),B=a("uYB+"),F=a("3oCz"),x=a("rMLV"),I=a("Tkt6"),M=a("yb+h"),k=a("+xh4"),q=a("Woux"),C=a("mjQF"),E=a("mLKm"),S=a("Fs2P"),z=a("Fwyz"),N=a("2/8D"),O=a("qajM"),T=a("FFyt"),L=a("HB2f"),_=a("coXC"),J=a("+Y5U"),K=function(){function e(){}return e.value=new e,e}(),j=function(){function e(e){this.value0=e}return e.create=function(t){return new e(t)},e}(),R=function(){function e(e){this.value0=e}return e.create=function(t){return new e(t)},e}(),Y=function(){function e(e){this.value0=e}return e.create=function(t){return new e(t)},e}(),H=function(){function e(e){this.value0=e}return e.create=function(t){return new e(t)},e}(),P=function(){function e(){}return e.value=new e,e}(),G=function(){function e(e){this.value0=e}return e.create=function(t){return new e(t)},e}(),W=M.runEffectFn2(x.log),Z=O.createComponent("UploadExample"),D=(n=function(e){return function(t){if(t instanceof K)return l.pure(U.applicativeEffect)(g.unit);if(t instanceof j)return e.setState(function(e){return{readonly:t.value0,startUpload:e.startUpload,avatar:e.avatar,files:e.files,images:e.images}});if(t instanceof R)return e.setStateThen(function(e){return{images:t.value0,files:e.files,avatar:e.avatar,readonly:e.readonly,startUpload:e.startUpload}})(W("value:")(t.value0));if(t instanceof Y)return e.setStateThen(function(e){return{images:e.images,files:t.value0,avatar:e.avatar,readonly:e.readonly,startUpload:e.startUpload}})(W("value:")(t.value0));if(t instanceof H)return e.setStateThen(function(e){return{images:e.images,files:e.files,avatar:t.value0,readonly:e.readonly,startUpload:e.startUpload}})(W("value:")(t.value0));if(t instanceof P)return A.launchAff_(h.maybe(v.map(A.functorAff)(G.create)(B.new(g.unit)))(function(e){return v.map(A.functorAff)(m.const(K.value))(B.tryPut(g.unit)(e))})(e.state.startUpload));if(t instanceof G)return e.setState(function(e){return{readonly:e.readonly,startUpload:new h.Just(t.value0),avatar:e.avatar,files:e.files,images:e.images}});throw new Error("Failed pattern match at Lumi.Components.Examples.Upload (line 57, column 17 - line 87, column 52): "+[t.constructor.name])}},r=o.bind(A.bindAff)(F.liftEffect(A.monadEffectAff)(I.randomRange(100)(700)))(function(e){return A.delay(e)}),i=function(e){return function(t){var a=y.round(J.size(t)),n={totalBytes:a,uploadedBytes:0};return o.discard(o.discardUnit)(A.bindAff)(r)(function(){return o.discard(o.discardUnit)(A.bindAff)(d.emit(e)(n))(function(){return o.discard(o.discardUnit)(A.bindAff)(r)(function(){return o.discard(o.discardUnit)(A.bindAff)(d.emit(e)({totalBytes:n.totalBytes,uploadedBytes:f.div(f.euclideanRingInt)(a)(8)}))(function(){return o.discard(o.discardUnit)(A.bindAff)(r)(function(){return o.discard(o.discardUnit)(A.bindAff)(d.emit(e)({totalBytes:n.totalBytes,uploadedBytes:f.div(f.euclideanRingInt)(a)(2)}))(function(){return o.discard(o.discardUnit)(A.bindAff)(r)(function(){return o.discard(o.discardUnit)(A.bindAff)(d.emit(e)({totalBytes:n.totalBytes,uploadedBytes:a}))(function(){return d.close(e)(l.pure(c.applicativeEither)(N.FileId(J.name(t))))})})})})})})})})}},u={images:[],files:[],avatar:h.Nothing.value,readonly:!1,startUpload:h.Nothing.value},O.make()(Z)({initialState:u,didMount:function(e){return A.launchAff_(v.map(A.functorAff)(function(t){return n(e)(G.create(t))})(B.empty))},render:function(e){return q.column_([q.column({style:T.css({maxWidth:"50rem",padding:"2rem 0"}),children:[S.labeledField({label:T.text("Readonly"),value:E.input({type:E.switch.type,autoComplete:E.switch.autoComplete,checked:e.state.readonly?E.On.value:E.Off.value,disabled:E.switch.disabled,max:E.switch.max,min:E.switch.min,step:E.switch.step,name:E.switch.name,onBlur:E.switch.onBlur,onChange:_.handler(L.targetChecked)(function(t){return n(e)(j.create(h.fromMaybe(!1)(t)))}),onFocus:E.switch.onFocus,onKeyUp:E.switch.onKeyUp,pattern:E.switch.pattern,placeholder:E.switch.placeholder,readOnly:E.switch.readOnly,required:E.switch.required,size:E.switch.size,style:E.switch.style,testId:E.switch.testId,value:E.switch.value,variant:E.switch.variant}),validationError:h.Nothing.value,required:S.Neither.value,forceTopLabel:!1,style:T.css({})})]}),z.h2_("Images"),C.example(q.column({style:T.css({alignSelf:"stretch"}),children:[N.upload({allowMultiple:N.defaults.allowMultiple,backend:{fetch:function(e){return l.pure(A.applicativeAff)({id:e,name:e,previewUri:h.Nothing.value})},upload:function(e){return d.produceAff(function(t){return i(t)(e)})}},disabled:N.defaults.disabled,name:N.defaults.name,onBlur:N.defaults.onBlur,onChange:function(t){return n(e)(R.create(t))},onFocus:N.defaults.onFocus,readonly:e.state.readonly,required:N.defaults.required,testId:N.defaults.testId,value:e.state.images,variant:N.Images.value})]})),z.h2_("Files"),C.example(q.column({style:T.css({alignSelf:"stretch"}),children:[N.upload({allowMultiple:N.defaults.allowMultiple,backend:{fetch:function(e){return l.pure(A.applicativeAff)({id:e,name:e,previewUri:h.Nothing.value})},upload:function(t){return d.produceAff(function(a){return o.discard(o.discardUnit)(A.bindAff)(p.foldMap(p.foldableMaybe)(A.monoidAff(b.monoidUnit))(B.read)(e.state.startUpload))(function(){return o.discard(o.discardUnit)(A.bindAff)(v.void(A.functorAff)(p.foldMap(p.foldableMaybe)(A.monoidAff(h.monoidMaybe(w.semigroupUnit)))(B.tryTake)(e.state.startUpload)))(function(){return i(a)(t)})})})}},disabled:N.defaults.disabled,name:N.defaults.name,onBlur:N.defaults.onBlur,onChange:function(t){return n(e)(Y.create(t))},onFocus:N.defaults.onFocus,readonly:e.state.readonly,required:N.defaults.required,testId:N.defaults.testId,value:e.state.files,variant:N.Files.value}),k.button({accessibilityLabel:k.primary.accessibilityLabel,color:k.primary.color,disabled:k.primary.disabled,onPress:_.handler_(n(e)(P.value)),size:k.primary.size,style:k.primary.style,testId:k.primary.testId,title:"Upload",type:k.primary.type,loading:k.primary.loading})]})),z.h2_("Avatar"),C.example(q.column({style:T.css({alignSelf:"stretch"}),children:[N.upload({allowMultiple:N.defaults.allowMultiple,backend:{fetch:function(e){return l.pure(A.applicativeAff)({id:e,name:e,previewUri:h.Nothing.value})},upload:function(e){return d.produceAff(function(t){return i(t)(e)})}},disabled:N.defaults.disabled,name:N.defaults.name,onBlur:N.defaults.onBlur,onChange:function(t){return n(e)(H.create(s.head(t)))},onFocus:N.defaults.onFocus,readonly:e.state.readonly,required:N.defaults.required,testId:N.defaults.testId,value:h.maybe([])(l.pure(l.applicativeArray))(e.state.avatar),variant:N.Avatar.value})]}))])}})(g.unit));e.exports={component:Z,NoOp:K,SetReadonly:j,ImageEx:R,FileEx:Y,AvatarEx:H,StartUpload:P,InitializeUploadBuffer:G,docs:D,debug:W};a("sygH"),a("3kYz")}}]);