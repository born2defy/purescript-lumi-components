(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{972:function(e,t,n){"use strict";var a,r,i,u,o=n(5),l=n(11),d=n(435),s=n(45),c=n(29),f=n(116),p=n(23),m=n(10),v=n(2),y=n(85),h=n(1),b=n(22),w=n(17),g=n(16),U=n(3),A=n(93),B=n(445),I=n(58),F=n(304),x=n(974),M=n(48),E=n(174),N=n(72),S=n(303),k=n(114),q=n(218),C=n(40),_=n(312),z=n(24),R=n(26),O=n(91),T=n(60),L=n(309),J=function(){function e(){}return e.value=new e,e}(),K=function(){function e(e){this.value0=e}return e.create=function(t){return new e(t)},e}(),P=function(){function e(e){this.value0=e}return e.create=function(t){return new e(t)},e}(),W=function(){function e(e){this.value0=e}return e.create=function(t){return new e(t)},e}(),j=function(){function e(e){this.value0=e}return e.create=function(t){return new e(t)},e}(),D=function(){function e(){}return e.value=new e,e}(),G=function(){function e(e){this.value0=e}return e.create=function(t){return new e(t)},e}(),H=M.runEffectFn2(F.log),Q=z.createComponent("UploadExample"),V=(a=function(e){return function(t){if(t instanceof J)return o.pure(U.applicativeEffect)(g.unit);if(t instanceof K)return e.setState(function(e){return{readonly:t.value0,startUpload:e.startUpload,avatar:e.avatar,files:e.files,images:e.images}});if(t instanceof P)return e.setStateThen(function(e){return{images:t.value0,files:e.files,avatar:e.avatar,readonly:e.readonly,startUpload:e.startUpload}})(H("value:")(t.value0));if(t instanceof W)return e.setStateThen(function(e){return{images:e.images,files:t.value0,avatar:e.avatar,readonly:e.readonly,startUpload:e.startUpload}})(H("value:")(t.value0));if(t instanceof j)return e.setStateThen(function(e){return{images:e.images,files:e.files,avatar:t.value0,readonly:e.readonly,startUpload:e.startUpload}})(H("value:")(t.value0));if(t instanceof D)return A.launchAff_(h.maybe(v.map(A.functorAff)(G.create)(B.new(g.unit)))(function(e){return v.map(A.functorAff)(m.const(J.value))(B.tryPut(g.unit)(e))})(e.state.startUpload));if(t instanceof G)return e.setState(function(e){return{readonly:e.readonly,startUpload:new h.Just(t.value0),avatar:e.avatar,files:e.files,images:e.images}});throw new Error("Failed pattern match at Lumi.Components.Examples.Upload (line 57, column 17 - line 87, column 52): "+[t.constructor.name])}},r=l.bind(A.bindAff)(I.liftEffect(A.monadEffectAff)(x.randomRange(100)(700)))(function(e){return A.delay(e)}),i=function(e){return function(t){var n=y.round(L.size(t)),a={totalBytes:n,uploadedBytes:0};return l.discard(l.discardUnit)(A.bindAff)(r)(function(){return l.discard(l.discardUnit)(A.bindAff)(d.emit(e)(a))(function(){return l.discard(l.discardUnit)(A.bindAff)(r)(function(){return l.discard(l.discardUnit)(A.bindAff)(d.emit(e)({totalBytes:a.totalBytes,uploadedBytes:f.div(f.euclideanRingInt)(n)(8)}))(function(){return l.discard(l.discardUnit)(A.bindAff)(r)(function(){return l.discard(l.discardUnit)(A.bindAff)(d.emit(e)({totalBytes:a.totalBytes,uploadedBytes:f.div(f.euclideanRingInt)(n)(2)}))(function(){return l.discard(l.discardUnit)(A.bindAff)(r)(function(){return l.discard(l.discardUnit)(A.bindAff)(d.emit(e)({totalBytes:a.totalBytes,uploadedBytes:n}))(function(){return d.close(e)(o.pure(c.applicativeEither)(_.FileId(L.name(t))))})})})})})})})})}},u={images:[],files:[],avatar:h.Nothing.value,readonly:!1,startUpload:h.Nothing.value},z.make()(Q)({initialState:u,didMount:function(e){return A.launchAff_(v.map(A.functorAff)(function(t){return a(e)(G.create(t))})(B.empty))},render:function(e){return N.column_([N.column({style:R.css({maxWidth:"50rem",padding:"2rem 0"}),children:[q.labeledField({label:R.text("Readonly"),value:k.input({type:k.switch.type,autoComplete:k.switch.autoComplete,checked:e.state.readonly?k.On.value:k.Off.value,disabled:k.switch.disabled,max:k.switch.max,min:k.switch.min,step:k.switch.step,name:k.switch.name,onBlur:k.switch.onBlur,onChange:T.handler(O.targetChecked)(function(t){return a(e)(K.create(h.fromMaybe(!1)(t)))}),onFocus:k.switch.onFocus,onKeyUp:k.switch.onKeyUp,pattern:k.switch.pattern,placeholder:k.switch.placeholder,readOnly:k.switch.readOnly,required:k.switch.required,size:k.switch.size,style:k.switch.style,testId:k.switch.testId,value:k.switch.value,variant:k.switch.variant}),validationError:h.Nothing.value,required:q.Neither.value,forceTopLabel:!1,style:R.css({})})]}),C.h2_("Images"),S.example(N.column({style:R.css({alignSelf:"stretch"}),children:[_.upload({allowMultiple:_.defaults.allowMultiple,backend:{fetch:function(e){return o.pure(A.applicativeAff)({id:e,name:e,previewUri:h.Nothing.value})},upload:function(e){return d.produceAff(function(t){return i(t)(e)})}},disabled:_.defaults.disabled,name:_.defaults.name,onBlur:_.defaults.onBlur,onChange:function(t){return a(e)(P.create(t))},onFocus:_.defaults.onFocus,readonly:e.state.readonly,required:_.defaults.required,testId:_.defaults.testId,value:e.state.images,variant:_.Images.value})]})),C.h2_("Files"),S.example(N.column({style:R.css({alignSelf:"stretch"}),children:[_.upload({allowMultiple:_.defaults.allowMultiple,backend:{fetch:function(e){return o.pure(A.applicativeAff)({id:e,name:e,previewUri:h.Nothing.value})},upload:function(t){return d.produceAff(function(n){return l.discard(l.discardUnit)(A.bindAff)(p.foldMap(p.foldableMaybe)(A.monoidAff(b.monoidUnit))(B.read)(e.state.startUpload))(function(){return l.discard(l.discardUnit)(A.bindAff)(v.void(A.functorAff)(p.foldMap(p.foldableMaybe)(A.monoidAff(h.monoidMaybe(w.semigroupUnit)))(B.tryTake)(e.state.startUpload)))(function(){return i(n)(t)})})})}},disabled:_.defaults.disabled,name:_.defaults.name,onBlur:_.defaults.onBlur,onChange:function(t){return a(e)(W.create(t))},onFocus:_.defaults.onFocus,readonly:e.state.readonly,required:_.defaults.required,testId:_.defaults.testId,value:e.state.files,variant:_.Files.value}),E.button({accessibilityLabel:E.primary.accessibilityLabel,color:E.primary.color,disabled:E.primary.disabled,onPress:T.handler_(a(e)(D.value)),size:E.primary.size,style:E.primary.style,testId:E.primary.testId,title:"Upload",type:E.primary.type,loading:E.primary.loading})]})),C.h2_("Avatar"),S.example(N.column({style:R.css({alignSelf:"stretch"}),children:[_.upload({allowMultiple:_.defaults.allowMultiple,backend:{fetch:function(e){return o.pure(A.applicativeAff)({id:e,name:e,previewUri:h.Nothing.value})},upload:function(e){return d.produceAff(function(t){return i(t)(e)})}},disabled:_.defaults.disabled,name:_.defaults.name,onBlur:_.defaults.onBlur,onChange:function(t){return a(e)(j.create(s.head(t)))},onFocus:_.defaults.onFocus,readonly:e.state.readonly,required:_.defaults.required,testId:_.defaults.testId,value:h.maybe([])(o.pure(o.applicativeArray))(e.state.avatar),variant:_.Avatar.value})]}))])}})(g.unit));e.exports={component:Q,NoOp:J,SetReadonly:K,ImageEx:P,FileEx:W,AvatarEx:j,StartUpload:D,InitializeUploadBuffer:G,docs:V,debug:H};n(0),n(4)},974:function(e,t,n){"use strict";var a=n(975),r=n(2),i=n(85),u=n(3),o=r.map(u.functorEffect)(function(e){return e<.5})(a.random);e.exports={randomInt:function(e){return function(t){return function(){var n=a.random(),r=(i.toNumber(t)-i.toNumber(e)+1)*n+i.toNumber(e);return i.floor(r)}}},randomRange:function(e){return function(t){return function(){return a.random()*(t-e)+e}}},randomBool:o,random:a.random};n(0)},975:function(e,t,n){"use strict";t.random=Math.random}}]);